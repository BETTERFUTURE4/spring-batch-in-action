# 1. 배치 애플리케이션이란?



> 배치(Batch)는 **일괄처리** 란 뜻을 갖고 있습니다. 

배치 어플리케이션은 다음의 조건을 만족해야만 합니다.

* 대용량 데이터 - 배치 어플리케이션은 대량의 데이터를 가져오거나, 전달하거나, 계산하는 등의 처리를 할 수 ​​있어야 합니다.
* 자동화 - 배치 어플리케이션은 심각한 문제 해결을 제외하고는 **사용자 개입 없이 실행**되어야 합니다.
* 견고성 - 배치 어플리케이션은 잘못된 데이터를 충돌/중단 없이 처리할 수 있어야 합니다.
* 신뢰성 - 배치 어플리케이션은 무엇이 잘못되었는지를 추적할 수 있어야 합니다. (로깅, 알림)
* 성능 - 배치 어플리케이션은 **지정한 시간 안에 처리를 완료**하거나 동시에 실행되는 **다른 어플리케이션을 방해하지 않도록 수행**되어야합니다.

## 1-1. Spring Batch?

Spring Batch 프로젝트는 Accenture와 Spring Source의 공동 작업으로 2007 년에 탄생했습니다.  
Accenture는 수년간의 노력으로 그들만의 배치 프레임워크를 만들었고, 그를 통해 얻은 경험을 가지고 있었습니다.  
즉, Accenture의 배치 노하우 & 기술력 + Spring 프레임워크가 합쳐져 만들어진 것이 **Spring Batch** 입니다.  
  
Spring Batch는 Spring의 특성을 그대로 가져왔습니다.  
그래서 **DI, AOP, 서비스 추상화** 등 Spring 프레임워크의 3대 요소를 모두 사용할 수 있으면서, Accenture의 Batch 노하우가 담긴 아키텍처를 사용할 수 있습니다.  
  
현재 Spring Batch 4.0 에서 지원하는 Reader & Writer는 아래와 같습니다.

| DataSource | 기술      | 설명                                       |
|------------|-----------|--------------------------------------------|
| Database   | JDBC      | 페이징, 커서, 일괄 업데이트 등 사용 가능   |
| Database   | Hibernate | 페이징, 커서 사용 가능                     |
| Database   | JPA       | 페이징 사용 가능 (현재 버전에선 커서 없음) |
| File       | Flat file | 지정한 구분자로 파싱 지원                  |
| File       | XML       | XML 파싱 지원                                           |

> **iBatis는 현재 삭제**되었습니다.  
iBatis를 reader로 사용하셨던 분들은 JDBC ItemReader로 교체하시길 추천드립니다.


## 1-2. Batch vs Quartz?

간혹 Spring Batch와 Spring Quartz를 비교하는 글을 보게 되는데요.  
둘은 역할이 완전히 다릅니다.  
Quartz는 스케줄러의 역할이지, Batch 와 같이 대용량 데이터 배치 처리에 대한 기능을 지원하지 않습니다.  
반대로 Batch 역시 Quartz의 다양한 스케줄 기능을 지원하지 않아서 보통은 Quartz + Batch를 조합해서 사용합니다.  
Quartz가 정해진 스케줄마다 Spring Batch를 실행하는 구조라고 보시면 됩니다.

## 1-3. Batch 사례

실제 기업에선 다음과 같은 상황에서 배치 어플리케이션을 사용합니다.

### 일매출 집계


### 매출 정산

쿠팡, 옥션, 배달의민족과 같은 커머스 사이트에선 사이트를 통해 물건/음식이 판매될 경우 판매금액을 모아두었다가 정기적인 주기로 사장님들께 금액을 지급 합니다.  
보통 이걸 **정산**이라고 하는데요.  
